"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[197],{2197:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var t=l(5043),s=l(3003),n=l(3216),r=l(5002),i=l(593);const d={userImg:"UserSettings_userImg__8hOOH"};var c=l(4071),u=l(7424),o=l(2200),m=l(1036),x=l(579);function g(){const e=(0,s.d4)((e=>e.user.userInfo)),a=e=>m.oR.error(e),[,l]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[p,j]=(0,t.useState)(""),h=(0,s.wA)();const f=(0,t.useRef)(),[b,N]=(0,t.useState)(!1);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mx-auto border-t-2 mt-4",children:[(0,x.jsx)("h2",{className:"text-center my-4 font-bold text-lg",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),e?(0,x.jsxs)("form",{onSubmit:async function(e){try{e.preventDefault(),console.log("start");let a={name:e.target.name.value,email:e.target.email.value,telegram:e.target.telegram.value,address:e.target.address.value,avatarUrl:p,phoneNumber:e.target.phoneNumber.value};const l=await r.A.patch("/update-user-data",a);200===l.status&&(h((0,u.ys)(l.data)),v(!1),window.location.reload()),console.log("close")}catch(e){var l;console.log(e),500===(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status)?a(e.response.data.message):a("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")}},children:[(0,x.jsxs)("div",{className:"mx-auto md:flex justify-center gap-4",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-2 md:border rounded-md p-2 md:border-gray-400 content-center",children:[(0,x.jsx)("div",{className:"mx-auto ".concat(d.userImg," justify-center items-center"),children:""!==p?(0,x.jsx)("img",{src:"".concat(i.E,"/").concat(p),alt:""}):(0,x.jsx)(x.Fragment,{children:b?(0,x.jsx)(c.z,{}):(0,x.jsx)(x.Fragment,{children:""!==e.avatarUrl?(0,x.jsx)("img",{src:"".concat(i.E,"/").concat(e.avatarUrl),alt:""}):(0,x.jsx)(x.Fragment,{})})})}),(0,x.jsxs)("div",{className:"flex justify-center md:justify-end",children:[(0,x.jsx)("input",{type:"file",hidden:!0,ref:f,onChange:async()=>{try{v(!1),N(!0),j("");const e=f.current.files[0];console.log(e);const a=new FormData;a.append("image",e);const l=await r.A.post("/upload ",a);200===l.status&&j(l.data.imagePath),v(!0)}catch(e){l(e.message),console.error("Error uploading file:",e)}N(!1)}}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)("p",{className:"text-xs text-red-500 w-56 text-center",children:"*\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e\u0442\u0441\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0441 \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u0435\u0439 1:1 (\u0434\u043e 500px)"}),(0,x.jsx)(o.Button,{size:"md",variant:"outlined",onClick:()=>f.current.click(),children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-2 p-4 md:p-0",children:[(0,x.jsx)("div",{className:"flex",children:(0,x.jsx)(o.Input,{size:"md",name:"name",label:"\u0418\u043c\u044f:",defaultValue:null!==e&&void 0!==e&&e.name?e.name:"",onInput:a=>a.target.value.trim()!==e.name?v(!0):v(!1)})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.Input,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:",defaultValue:null!==e&&void 0!==e&&e.phoneNumber?e.phoneNumber:"",name:"phoneNumber",disabled:!0,onInput:a=>a.target.value.trim()!==e.email?v(!0):v(!1)})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.Input,{label:"Email:",defaultValue:null!==e&&void 0!==e&&e.email?e.email:"",name:"email",onInput:a=>a.target.value.trim()!==e.email?v(!0):v(!1)})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.Input,{label:"Telegram",defaultValue:null!==e&&void 0!==e&&e.telegram?e.telegram:"",name:"telegram",onInput:a=>a.target.value.trim()!==e.telegram?v(!0):v(!1)})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.Input,{label:"\u0410\u0434\u0440\u0435\u0441",defaultValue:null!==e&&void 0!==e&&e.address[0]?e.address[0]:"",name:"address",onInput:a=>a.target.value.trim()!==e.address[0]?v(!0):v(!1)})}),"superUser"===e.role?(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)("div",{children:(0,x.jsx)(o.Input,{label:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f:",defaultValue:e.userOrganizatsion})}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsx)(o.Input,{label:"\u0410\u0434\u0440\u0435\u0441 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438:"})}),(0,x.jsx)(o.Button,{size:"sm",variant:"outlined",className:"flex-none",children:"+"})]})]}):(0,x.jsx)("div",{})]})]}),(0,x.jsxs)("div",{className:"flex justify-end gap-2 p-4 md:p-0",children:[(0,x.jsx)(o.Button,{size:"md",variant:"filled",color:"green",type:"submit",disabled:!g,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,x.jsx)(o.Button,{size:"md",variant:"outlined",color:"blue-gray",onClick:()=>{v(!1),j("")},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]}):(0,x.jsx)("div",{})]}),(0,x.jsx)(n.sv,{})]})}}}]);
//# sourceMappingURL=197.e09d6960.chunk.js.map