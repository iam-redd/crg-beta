"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[397],{3397:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var s=r(5043),n=r(4101),a=r(4056),i=r(5865),d=r(6446),l=r(4071),c=r(155);const o={container:"OrderStatus_container__YBymB",btn_wrapper:"OrderStatus_btn_wrapper__439IG",btn:"OrderStatus_btn__IzzFB",btn_:"OrderStatus_btn___uql76",opacity:"OrderStatus_opacity__yF1LV",colorRed:"OrderStatus_colorRed__6LmRn"};var x=r(5002),u=r(1036),h=r(579);function j(e){let{status:t,id:r,getAllOrders:n,index:a}=e;const i=["\u041e\u0442\u043a\u0430\u0437","\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c","\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"],[d,l]=(0,s.useState)(!1);let c=!0,j=!0,m=!0,g=!0;async function p(e){try{if(console.log("click"),l(!0),t!==e){200===(await x.A.patch("/order",{orderId:r,nextStatus:e})).status&&n(),l(!1)}}catch(a){l(!1),console.log(a),404===a.response.status&&(s=a.response.data.message,u.oR.error(s))}var s}return 0===a&&(m=!1,g=!1),1===a&&(j=!1,g=!1),2===a&&(c=!1,j=!1,m=!1),3===a&&(c=!1,j=!1,m=!1,g=!1),4===a&&(c=!1,j=!1,m=!1,g=!1),5===a&&("\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e"===t&&(c=!1,j=!1,m=!1,g=!1),"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438"===t&&(m=!1,g=!1),"\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u043e"===t&&(m=!1,g=!1),"\u0412 \u043f\u0443\u0442\u0438"===t&&(c=!1,j=!1,m=!1),"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"===t&&(c=!1,j=!1,m=!1,g=!1)),(0,h.jsxs)("div",{className:o.container,children:[(0,h.jsxs)("div",{className:"".concat(o.colorRed," ").concat(o.btn_wrapper," ").concat(!c&&o.opacity),onClick:()=>c&&!d&&p("\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e"),children:[(0,h.jsx)("div",{className:o.btn_,children:"1"}),i[0]]}),(0,h.jsxs)("div",{className:"".concat(o.btn_wrapper," ").concat(!j&&o.opacity),onClick:()=>j&&!d&&p("\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"),children:[(0,h.jsx)("div",{className:o.btn,children:"2"}),i[1]]}),(0,h.jsxs)("div",{className:"".concat(o.btn_wrapper," ").concat(!m&&o.opacity),onClick:()=>m&&!d&&p("\u0412 \u043f\u0443\u0442\u0438"),children:[(0,h.jsx)("div",{className:o.btn,children:"3"}),i[2]]}),(0,h.jsxs)("div",{className:"".concat(o.btn_wrapper," ").concat(!g&&o.opacity),onClick:()=>g&&!d&&p("\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"),children:[(0,h.jsx)("div",{className:o.btn,children:"4"}),i[3]]})]})}var m=r(9359),g=r(2880),p=r(6938),A=r(7659),_=r(3003);function v(e){let{data:t,getAllOrders:r,index:n}=e;const[a,i]=(0,s.useState)(!1),[d,l]=(0,s.useState)(!1),o=(0,_.d4)((e=>e.user.userInfo)),[x]=(0,s.useState)(!1),u={open:{transform:"rotate(-180deg"},closed:{transform:"rotate(0deg"}};return(0,h.jsx)(h.Fragment,{children:o._id===t.manager.id&&(0,h.jsxs)("div",{className:c.A.container,children:[(0,h.jsxs)("div",{className:c.A.header,children:["\u2116 ",t.identifier]}),(0,h.jsxs)("div",{className:c.A.main,children:[(0,h.jsxs)("p",{children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",(0,h.jsx)("span",{className:c.A.status,children:t.status})]}),(0,h.jsxs)("p",{children:["\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430: ",(0,h.jsx)("span",{className:c.A.status,children:t.creationDate})]}),(0,h.jsxs)("p",{children:["\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430: ",(0,h.jsx)("span",{className:c.A.status,children:t.totalPrice})]}),(0,h.jsxs)("p",{children:["\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b: ",(0,h.jsx)("span",{className:c.A.status,children:t.paymentMethod})]})]}),(0,h.jsxs)("div",{className:c.A.footer,onClick:()=>i(!a),children:[(0,h.jsx)("span",{children:(0,h.jsxs)(h.Fragment,{children:[t.listProducts.length,1===t.listProducts.length?" \u0442\u043e\u0432\u0430\u0440":(0,h.jsx)(h.Fragment,{children:t.listProducts.length<5?" \u0442\u043e\u0432\u0430\u0440\u0430":" \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]})}),(0,h.jsx)("span",{children:(0,h.jsx)(g.P.img,{src:m,alt:"",className:c.A.img,animate:a?"open":"closed",variants:u})})]}),(0,h.jsx)(p.N,{children:a&&(0,h.jsx)(g.P.div,{className:c.A.wrapper,initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,h.jsx)("div",{className:c.A.list_wrapper,children:t.listProducts.map(((e,s)=>(0,h.jsx)(A.A,{data:e,isVisible:x,orderId:t._id,getAllOrders:r,bool:!0,index:n},s)))})})}),t.rejectedList.length>0&&(0,h.jsxs)("div",{className:c.A.footer,onClick:()=>l(!d),children:[(0,h.jsx)("span",{children:(0,h.jsxs)(h.Fragment,{children:[" \u0423\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438\u0437 \u0437\u0430\u043a\u0430\u0437\u0430"," "+t.rejectedList.length,1===t.rejectedList.length?" \u0442\u043e\u0432\u0430\u0440":(0,h.jsx)(h.Fragment,{children:t.rejectedList.length<5?" \u0442\u043e\u0432\u0430\u0440\u0430":" \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]})}),(0,h.jsx)("span",{children:(0,h.jsx)(g.P.img,{src:m,alt:"",className:c.A.img,animate:d?"open":"closed",variants:u})})]}),(0,h.jsx)(p.N,{children:d&&(0,h.jsx)(g.P.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},style:{overflow:"hidden"},children:(0,h.jsx)("div",{className:c.A.list_wrapper,children:t.rejectedList.map(((e,s)=>(0,h.jsx)(A.A,{data:e,isVisible:x,orderId:t._id,getAllOrders:r},s)))})})}),(0,h.jsx)(j,{status:t.status,getAllOrders:r,id:t._id,index:n})]})})}function b(e){let{data:t,getAllOrders:r,index:s}=e;return(0,h.jsx)(h.Fragment,{children:null===t?(0,h.jsx)(l.z,{}):(0,h.jsx)("div",{className:"",children:t.map((e=>(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))})})}function f(e){let{data:t,getAllOrders:r,index:s}=e;return(0,h.jsx)("div",{children:null!==t?(0,h.jsx)(h.Fragment,{children:t.map((e=>"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438"===e.status&&(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))}):(0,h.jsx)(l.z,{})})}function O(e){let{data:t,getAllOrders:r,index:s}=e;return console.log(t),(0,h.jsx)("div",{children:null!==t?(0,h.jsx)(h.Fragment,{children:t.map((e=>"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"===e.status&&(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))}):(0,h.jsx)(l.z,{})})}function C(e){let{data:t,getAllOrders:r,index:s}=e;return(0,h.jsx)("div",{children:null!==t?(0,h.jsx)(h.Fragment,{children:t.map((e=>"\u0412 \u043f\u0443\u0442\u0438"===e.status&&(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))}):(0,h.jsx)(l.z,{})})}function N(e){let{data:t,getAllOrders:r,index:s}=e;return(0,h.jsx)("div",{children:null!==t?(0,h.jsx)(h.Fragment,{children:t.map((e=>"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d"===e.status&&(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))}):(0,h.jsx)(l.z,{})})}function w(e){let{data:t,getAllOrders:r,index:s}=e;return(0,h.jsx)("div",{children:null!==t?(0,h.jsx)(h.Fragment,{children:t.map((e=>"\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e"===e.status&&(0,h.jsx)(v,{data:e,getAllOrders:r,index:s},e._id)))}):(0,h.jsx)(l.z,{})})}var y=r(3216);function I(e){const{children:t,value:r,index:s,...n}=e;return(0,h.jsx)("div",{role:"tabpanel",hidden:r!==s,id:"simple-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),...n,children:r===s&&(0,h.jsx)(d.A,{sx:{p:3},children:(0,h.jsx)(i.A,{children:t})})})}function M(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function F(){const[e,t]=s.useState(null),r=(0,_.d4)((e=>e.user.userInfo)),i=(0,y.Zp)();async function l(){try{const e=await x.A.get("/get-all-orders");if(200!==e.status)throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");console.log(e.data),t(e.data)}catch(e){i("/"),console.log(e.message)}}console.log("production");const[c,o]=s.useState(0);return s.useEffect((()=>{null===e&&l()})),(0,h.jsx)(h.Fragment,{children:r&&(0,h.jsxs)(d.A,{sx:{width:"100%"},children:[(0,h.jsx)("h2",{children:"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433"}),(0,h.jsx)(d.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,h.jsxs)(n.A,{value:c,onChange:(e,t)=>{o(t)},"aria-label":"basic tabs example",children:["giver"!==r.role&&(0,h.jsx)(a.A,{label:"\u041d\u043e\u0432\u044b\u0435",...M(1)}),(0,h.jsx)(a.A,{label:"\u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044b\u0435",...M(1)}),(0,h.jsx)(a.A,{label:"\u0432 \u043f\u0443\u0442\u0438",...M(2)}),(0,h.jsx)(a.A,{label:"\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435",...M(3)}),(0,h.jsx)(a.A,{label:"\u043e\u0442\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435",...M(4)}),(0,h.jsx)(a.A,{label:"\u0412\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u044b",...M(5)})]})}),"giver"!==r.role&&(0,h.jsx)(I,{value:c,index:0,children:(0,h.jsx)(f,{data:e,getAllOrders:l,index:0})}),(0,h.jsx)(I,{value:c,index:1,children:(0,h.jsx)(O,{data:e,getAllOrders:l,index:1})}),(0,h.jsx)(I,{value:c,index:2,children:(0,h.jsx)(C,{data:e,getAllOrders:l,index:2})}),(0,h.jsx)(I,{value:c,index:3,children:(0,h.jsx)(N,{data:e,getAllOrders:l,index:3})}),(0,h.jsx)(I,{value:c,index:4,children:(0,h.jsx)(w,{data:e,getAllOrders:l,index:4})}),(0,h.jsx)(I,{value:c,index:5,children:(0,h.jsx)(b,{data:e,getAllOrders:l,index:5})})]})})}},7659:(e,t,r)=>{r.d(t,{A:()=>l});var s=r(5043);const n={order:"ProductCard_order__Xcj01",info:"ProductCard_info__lO0OL",img:"ProductCard_img__TjIMA",btn:"ProductCard_btn__NEUn+",saveBtnWrapper:"ProductCard_saveBtnWrapper__oQhLM",container:"ProductCard_container__SaSmC"};var a=r(593),i=r(5002),d=r(579);function l(e){let{data:t,orderId:r,getAllOrders:l,bool:c,index:o}=e;const[x,u]=(0,s.useState)(0);let h=t.amount,j="";async function m(){try{const e="This is comment";console.log({orderId:r,productId:t.id,currentAmount:h,nextAmount:t.amount+x,comment:e});const s=await i.A.patch("/order/product/amount",{orderId:r,productId:t.id,currentAmount:h,nextAmount:t.amount+x,comment:e});console.log(s),200===s.status&&(l(),u(0))}catch(e){console.log(e.message)}}return"coffe-beans"===t.type?j="\u041a\u043e\u0444\u0435":"tea"===t.type?j="\u0427\u0430\u0439":"syrup"===t.type?j="\u0421\u0438\u0440\u043e\u043f":"accessory"===t.type?j="\u0410\u043a\u0441\u0435\u0441\u0441\u0443\u0430\u0440":"chemistry"===t.type?j="\u0425\u0438\u043c\u0438\u044f":"coffee-capsule"===t.type?j="\u041a\u043e\u0444\u0435 \u0432 \u043a\u0430\u043f\u0441\u0443\u043b\u0435":"drip"===t.type&&(j="\u0414\u0440\u0438\u043f-\u043a\u043e\u0444\u0435"),(0,d.jsx)(d.Fragment,{children:c?(0,d.jsxs)("div",{className:n.order,children:[(0,d.jsx)("img",{className:n.img,src:"".concat(a.E,"/").concat(t.img),alt:""}),(0,d.jsxs)("div",{className:n.info,children:[(0,d.jsxs)("p",{children:["\u041d\u0430\u0439\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f:",t.name,0!==x&&(0,d.jsx)("span",{className:n.btn,onClick:m,children:"C\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),(0,d.jsxs)("p",{children:["\u041e\u0431\u044c\u0451\u043c: ",t.weight]}),(0,d.jsxs)("p",{children:["\u0426\u0435\u043d\u0430: ",t.price,"\u0441\u0443\u043c"]}),(0,d.jsxs)("p",{children:["\u0412\u0438\u0434 \u0442\u043e\u0432\u0430\u0440\u0430: ",j]}),(0,d.jsxs)("p",{style:{display:"flex"},children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:",0===o&&(0,d.jsx)("button",{className:n.btn,onClick:function(){if(2>t.amount+x)return m(),null;u((e=>e-1))},children:"-"}),t.amount+x,0===o&&(0,d.jsx)("button",{className:n.btn,onClick:function(){u((e=>e+1))},children:"+"}),0===o&&(0,d.jsx)("button",{className:n.btn,onClick:async function(){try{const e="This is comment";console.log({orderId:r,productId:t.id,amount:t.amount,comment:e});const s=await i.A.patch("/order/product",{orderId:r,productId:t.id,amount:t.amount,comment:e,productWeight:t.weight});200===s.status&&(console.log(s.data),l())}catch(e){console.log(e)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]}):(0,d.jsxs)("div",{className:n.order,children:[(0,d.jsx)("img",{src:"".concat(a.E,"/").concat(t.img),className:n.img,alt:""}),(0,d.jsxs)("div",{className:n.info,children:[(0,d.jsxs)("p",{children:["\u041d\u0430\u0439\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f:",t.name]}),(0,d.jsxs)("p",{children:["\u041e\u0431\u044c\u0451\u043c: ",t.weight]}),(0,d.jsxs)("p",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",null===t||void 0===t?void 0:t.amount]})]})]})})}},155:(e,t,r)=>{r.d(t,{A:()=>s});const s={container:"OrderCardMonitoring_container__MwPNo",header:"OrderCardMonitoring_header__1-tJd",main:"OrderCardMonitoring_main__wRpSW",footer:"OrderCardMonitoring_footer__6C+RI",order:"OrderCardMonitoring_order__7Albw",left:"OrderCardMonitoring_left__AagjT",info:"OrderCardMonitoring_info__w7hFw",img:"OrderCardMonitoring_img__X4p5f",btn:"OrderCardMonitoring_btn__QB+Bs",saveBtnWrapper:"OrderCardMonitoring_saveBtnWrapper__j+YNF",wrapper:"OrderCardMonitoring_wrapper__dVG9c",status:"OrderCardMonitoring_status__ijAVn"}},9359:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVR4nO3YywrCMBCF4TyE9fJ8QjI5ML6hW8VFBRUvb6NULYgLL7VtJnj+bTrQL7NqnWOMMcYYY+xvA8IcCEtVLZyxvPcDQFYxyuLtwzFKCcg5RtlawvgrImzu71a+HRCRIRB294EjgLFLnKoWNQIIJ+/95KNBSxhtirCE0V8RFjDaFiIlRttGpMBoV4g+Mdo1og9Mb4guMb0jusAkQ7SJSY5oA2MG8QvGHKIJxiziG4x5xCeYbBCvMNkh6maz6QiQff2l+YA4VGcup+RhM9lt4rnq9m//AMI6u00wxhhjjDHmrHYB0WttJiI5OC4AAAAASUVORK5CYII="}}]);
//# sourceMappingURL=397.2a958289.chunk.js.map