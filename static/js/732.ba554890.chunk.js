"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[732],{5732:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var l=s(2200),n=s(5043),o=s(5002),a=s(3003),r=s(7424),c=s(6111),i=s.n(c),u=s(593),d=s(1036),m=s(579);const p=e=>{let{setCodeFormVisible:t}=e;const[s,c]=(0,n.useState)(null),[p,h]=(0,n.useState)(""),[g,x]=(0,n.useState)(300),[v,f]=(0,n.useState)(!0),N=(0,n.useRef)(null),b=(0,a.d4)((e=>e.user.register)),y=(0,a.wA)(),j=e=>d.oR.error(e);const S=()=>{f(!1),x(300),setTimeout((()=>f(!0)),0)};return(0,n.useEffect)((()=>(v&&g>0?N.current=setInterval((()=>{x((e=>e-1))}),1e3):clearInterval(N.current),()=>clearInterval(N.current))),[v,g]),(0,m.jsx)("div",{children:(0,m.jsxs)("form",{onSubmit:async function(e){try{e.preventDefault(),h("");let l=Object.assign({},b,{code:s.target.value.trim()});console.log(l);const n=await o.A.post("/verify-code",l);if(console.log(n),200===n.status){const e=JSON.stringify(n.data),s=i().AES.encrypt(e,u.o).toString();window.localStorage.setItem("data",JSON.stringify(s)),window.localStorage.setItem("token",JSON.stringify(n.data.token)),y((0,r.ys)(n.data)),y((0,r.UM)(null)),t(!1)}}catch(a){var l,n;if(console.log(a),null!==a&&void 0!==a&&a.response)null!==a&&void 0!==a&&null!==(l=a.response)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.message&&(console.log(a.response.data.message),h(a.response.data.message))}},className:"w-full m-auto h-full md:w-80 lg:h-2/6 border rounded-xl p-4 mt-10 md:mt-8",style:{backgroundColor:"#FFFFFF"},children:[(0,m.jsx)("h2",{className:"text-center my-4 font-bold ",children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}),(0,m.jsx)("p",{className:"text-sm my-2 text-center",children:(e=>{const t="0".concat(e%60).slice(-2),s=Math.floor(e/60),l="0".concat(s%60).slice(-2);return"".concat(l," : ").concat(t)})(g)}),(0,m.jsx)(l.Input,{className:"",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434",name:"code",onInput:e=>c(e)}),(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)("p",{className:"text-xs my-2",children:null!==b&&void 0!==b&&b.phoneNumber?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 6 \u0446\u0438\u0444\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 ".concat(b.phoneNumber.split("")[0]+b.phoneNumber.split("")[1]+b.phoneNumber.split("")[2]+b.phoneNumber.split("")[3]+"*****"+b.phoneNumber.split("")[11]+b.phoneNumber.split("")[12]):"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 6 \u0446\u0438\u0444\u0440 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 /\u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ****//"}),(0,m.jsx)("p",{className:"text-xs my-2 text-red-500",children:p}),(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)(l.Button,{className:"mt-4 mx-auto",variant:"outlined",size:"md",color:"red",type:"submit",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"}),(0,m.jsx)("p",{color:0===g?"red":"blue-gray",className:"text-xs mt-4 cursor-pointer",onClick:()=>0===g&&(async()=>{try{console.log(b),200===(await o.A.post("/send-code",b)).status&&S()}catch(s){var e,t;console.log(s),null!==s&&void 0!==s&&null!==(e=s.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.message?j(s.response.data.message):j(s)}})(),children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e"})]})]})]})})}}}]);
//# sourceMappingURL=732.ba554890.chunk.js.map